!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="3f37fb43-4a17-47e2-b6d2-f4314ab204cc",e._sentryDebugIdIdentifier="sentry-dbid-3f37fb43-4a17-47e2-b6d2-f4314ab204cc")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"9cc321247f9fdefd9741f3bea628958eadeba2f6"},chrome||browser||(window.chrome=chrome||window.chrome||window.browser),(chrome||window.chrome).runtime.getURL(""),(()=>{"use strict";const e="undefined"!=typeof window?window:self,t=e.chrome||e.browser||browser;let r;try{r=indexedDB||e.indexedDB}catch(e){console.log(`Error initializing indexedDB: ${e.message}`)}performance||e.performance,URL||e.URL,t.i18n.getUILanguage().split("-")[0],Object.freeze({LicenseStateUnknown:0,LicenseStateFree:1,LicenseStateTrial:2,LicenseStateTrialExpired:3,LicenseStateLicensed:4,LicenseStateLicenseExpired:5,LicenseStateLicenseGrace:6}),Object.freeze([2,4,6]),Object.freeze({MALWARE:Object.freeze({type:"malware",FULL_URL_MALWARE:"full-url-malware",SUSPICIOUS_PAGE:"suspiciousPage",SUSPICIOUS_TLD:"suspiciousTLD",RISKY_PATTERN:"riskyPattern",SUSPICIOUS_CONTENT:"suspiciousContent",MALWARE_PATTERN:"malware-pattern",ALERT_LOOP:"alertLoop",AUTH_REQUIRED_LOOP:"authRequiredLoop",CREATE_URL_LOOP:"createURLLoop",EXTENSION_INSTALL:"extensionInstall",FULL_SCREEN_LOOP:"fullScreenLoop",HISTORY_LOOP:"historyLoop",NOTIFICATION_LOOP:"notificationLoop",PRINT_LOOP:"printLoop",ADWARE:"adware",REPUTATION:"reputation",TROJAN:"trojan",MALVERTISING:"malvertising",WORM:"worm",RANSOMWARE:"ransomware",ROOTKIT:"rootkit",BACKDOOR:"backdoor",SPYWARE:"spyware",ALLOWED_EXCLUSION_VALUE:4}),SCAM:Object.freeze({type:"scam",TSS:"tss",SCAM_HEURISTIC:"scam_heuristic",ALLOWED_EXCLUSION_VALUE:6}),PHISHING:Object.freeze({type:"phishing",PHISHING_SUSPICIOUS_POST:"phishing_suspicious_post",PHISHING_BANKING:"phishing_banking",PHISHING_LOGIN:"phishing_login",PHISHING_LOGIN_VIA_TUNNEL:"phishing_login_via_tunnel",TELEMETRY_PHISHING_TUNNEL:"telemetryPhishingTunnel"}),AD:Object.freeze({type:"ad",ADSERVER:"adserver",ALLOWED_EXCLUSION_VALUE:2}),ADS:Object.freeze({type:"ads",ADSERVER:"adserver",ALLOWED_EXCLUSION_VALUE:2})}),Object.freeze({CHROME:"Chrome",FIREFOX:"Firefox",OPERA:"Opera",EDGE:"Edge",SAFARI:"Safari"}),Object.freeze({origins:["<all_urls>"],permissions:[],optional_permissions:[]}),new RegExp(/^(.*?)(##|#\?#)(.+)$/);const n=e=>new Promise(((r,n)=>t.runtime.sendMessage({type:"MSG_IMPORT_SETTINGS",data:e},(e=>{!e||e.error||t.runtime.lastError?(console.error("INC_EXP: Failed to import settings",{error:(e?e.error:null)||t.runtime.lastError}),n((e?e.error:null)||t.runtime.lastError)):(console.log("INC_EXP: Successfully imported settings"),r())})))),o=e=>{const r=document.getElementById("img-status"),n=document.getElementById("progress-bar"),o=document.getElementById("progress-percentage"),s=document.getElementById("status-desc");if(r.setAttribute("class",""),n.setAttribute("class",""),"completed"===e)return r.classList.add("import-successful"),n.classList.add("progress-complete"),o.textContent="100%",void(s.textContent=t.i18n.getMessage("ImportStatusDescriptionComplete"));if("unauthorized"===e){const e=document.getElementById("non-premium-desc"),i=document.getElementById("non-premium-txt");return r.classList.add("import-error"),n.classList.add("progress-error"),s.style.display="none",o.textContent="Unauthorized",e.style.display="inherit",void(i.textContent=t.i18n.getMessage("ImportStatusDescriptionUnauthorized"))}const i=document.getElementById("try-again-btn");r.classList.add("import-error"),n.classList.add("progress-error"),o.textContent="Error",s.textContent=t.i18n.getMessage("ImportStatusDescriptionError"),document.getElementById("error-btns-container").style.display="inherit",i.addEventListener("click",(()=>{location.reload()}))},s=async e=>{const r=document.getElementById("drag-and-drop"),s=document.getElementById("progress-container"),i=document.getElementById("status-desc"),a=document.getElementById("file-name");if(!e)return r.classList.remove("drag-over"),console.log("No file selected");console.log("Importing File",e.name);const d=new FileReader,c=document.getElementById("import-btn");if(c.classList.add("loading"),c.disabled=!0,r.remove(),s.style.display="inherit",s.style.opacity=1,a.textContent=`${e.name} - ${t.i18n.getMessage("ImportingTxt")}`,a.style.fontWeight=500,a.style.letterSpacing="0.1px",i.textContent=t.i18n.getMessage("ImportStatusDescriptionOnLoad"),!await new Promise(((e,r)=>{t.runtime.sendMessage({type:"MSG_IS_PREMIUM"},(function(t){!t||t.error?(console.error("Failed to check if premium: "+t.error),r(t.error)):(console.debug("Is premium: "+t.success),e(t.success))}))})))return s.style.display="inherit",s.style.opacity=1,o("unauthorized");d.onload=async e=>{const t=e.target.result;try{await(async e=>{const t=JSON.parse(e);if(!t)throw new Error("Invalid import data");console.debug("INC_EXP: Importing Data",{dataAsJson:t}),await n(t)})(t),o("completed"),console.debug("INC_EXP: Import completed")}catch(e){o("error"),console.error("INC_EXP: Failed to import settings",e)}c.classList.remove("loading"),c.disabled=!1},d.onerror=e=>{c.classList.remove("loading"),c.disabled=!1,console.error("INC_EXP: Failed to import settings",e)},d.onabort=e=>{c.classList.remove("loading"),c.disabled=!1,console.error("INC_EXP: Aborted settings import",e)},d.readAsText(e)};document.addEventListener("DOMContentLoaded",(()=>{((e,r=document)=>{[{id:"dd-title",msg:"DragAndDropTitle"},{id:"dd-desc",msg:"DragAndDropDescription"},{id:"import-btn",msg:"ImportBtnText"},{id:"status-desc",msg:"ImportStatusDescription"},{id:"try-again-btn",msg:"ImportTryAgainBtn"},{id:"contact-support-btn",msg:"ImportSupportBtn"}].forEach((({id:e,msg:n,sub:o=null})=>{const s=r.getElementById(e);s&&(s.textContent=t.i18n.getMessage(n,o||void 0))}))})(),(()=>{const e=document.getElementById("drag-and-drop");e.addEventListener("dragover",(t=>{t.preventDefault(),e.classList.add("drag-over")})),e.addEventListener("dragleave",(t=>{t.preventDefault(),e.classList.remove("drag-over")})),e.addEventListener("drop",(e=>{e.preventDefault();const t=e.dataTransfer.files[0];s(t)})),document.getElementById("file-input").addEventListener("change",(e=>{const t=e.target.files[0];s(t)}))})()}))})();
//# sourceMappingURL=firefox-import.js.map